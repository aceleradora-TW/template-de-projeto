plugins {
    id "com.moowork.node" version "1.3.1"
}

buildDir = "$projectDir/build"

node {
    version = '12.13.0'
    yarnVersion = '1.19.1'
    download = true
}

task clean(type: Delete) {
    delete buildDir
}

task yarnInstall(type: YarnTask) {
    args = ['install']
}

task lint(type: YarnTask) {
    args = ['lint']
}

task buildForProduction(dependsOn: [yarnInstall, clean], type: YarnTask) {
    args = ['build']
}

task buildForDevelopment(type: YarnTask) {
    inputs.dir("$projectDir/src")
    inputs.dir("$projectDir/public")
    inputs.file("$projectDir/package.json")

    outputs.dir buildDir

    args = ['build']
}

